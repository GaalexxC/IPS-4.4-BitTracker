<?xml version="1.0" encoding="UTF-8"?>
<javascript app="bitracker">
 <file javascript_app="bitracker" javascript_location="front" javascript_path="" javascript_name="ips.bitracker.browse.js" javascript_type="framework" javascript_version="10002" javascript_position="1000050"><![CDATA[/**
 *
 * ips.bitracker.browse.js - Handles general browsing controller needs
 *
 */
;( function($, _, undefined){
	&quot;use strict&quot;;

	ips.controller.register('bitracker.front.bitracker.browse', {

		initialize: function () {
			this.on( 'click', '[data-action=&quot;markCategoryRead&quot;]', this.markCategoryRead );
		},

		/**
		 * Marks all files in a category as read, triggering an event on the table
		 *
		 * @param 	{event} 	e 	Event object
		 * @returns {void}
		 */
		markCategoryRead: function (e) {
			e.preventDefault();

			var self = this;

			ips.ui.alert.show( {
				type: 'confirm',
				icon: 'question',
				message: ips.getString('markCategoryAsReadConfirm'),
				subText: '',
				callbacks: {
					ok: function () {
						var url = $( e.currentTarget ).attr('href');

						ips.getAjax()( url, {
							showLoading: true,
							bypassRedirect: true
						})
							.done( function () {
								// Trigger event on the table to hide unread markets
								self.triggerOn( 'core.global.core.table', 'markTableRead' );

								// Hide the link we've just clicked
								ips.utils.anim.go( 'fadeOut', $( e.currentTarget ) );

								ips.ui.flashMsg.show( ips.getString('categoryMarkedRead') );
							})
							.fail( function (jqXHR, textStatus, errorThrown) {
								window.location = url;
							});
					}
				}
			});
		}
	});
}(jQuery, _));]]></file>
 <file javascript_app="bitracker" javascript_location="front" javascript_path="" javascript_name="ips.settings.settings.js" javascript_type="framework" javascript_version="10002" javascript_position="1000050"><![CDATA[/**
 *
 * ips.settings.settings.js
 *
 */
;( function($, _, undefined){
	&quot;use strict&quot;;

	ips.controller.register('bitracker.admin.settings.settings', {
		alertOpen: false,

		initialize: function () {
			this.on( 'uploadComplete', '[data-ipsUploader]', this.promptRebuildPreference );
			this.on( 'fileDeleted', this.promptRebuildPreference );
		},

		promptRebuildPreference: function (e) {

			if( this.alertOpen )
			{
				return;
			}

			this.alertOpen = true;

			/* Show Rebuild Prompt */
			ips.ui.alert.show({
				type: 'confirm',
				message: ips.getString('bitrackerScreenshotsWatermark'),
				subText: ips.getString('bitrackerScreenshotsWatermarkBlurb'),
				icon: 'question',
				buttons: {
					ok: ips.getString('bitrackerScreenshotsWatermarkYes'),
					cancel: ips.getString('bitrackerScreenshotsWatermarkNo')
				},
				callbacks: {
					ok: function(){
						$('input[name=rebuildWatermarkScreenshots]').val( 1 );
						this.alertOpen = false;
					},
					cancel: function(){
						$('input[name=rebuildWatermarkScreenshots]').val( 0 );
						this.alertOpen = false;
					}
				}
			});
		}

	});
}(jQuery, _));]]></file>
 <file javascript_app="bitracker" javascript_location="front" javascript_path="" javascript_name="ips.submit.linkedScreenshots.js" javascript_type="framework" javascript_version="10002" javascript_position="1000050"><![CDATA[/**
 *
 * ips.submit.linkedScreenshots.js - Controller to handle linked screenshots
 *
 */
;( function($, _, undefined){
	&quot;use strict&quot;;

	ips.controller.register('bitracker.front.submit.linkedScreenshots', {

		initialize: function () {
			this.on( 'click', '[data-action=&quot;addField&quot;]', this.addFieldButton );
			this.on( 'click', '[data-action=&quot;removeField&quot;]', this.removeField );
			this.setup();
		},

		/**
		 * Setup method
		 *
		 * @returns 	{void}
		 */
		setup: function () {
			var initialValues = $.parseJSON( $(this.scope).attr('data-initialValue') );

			if( initialValues == null )
			{
				return;
			}

			var i;
			for ( i in initialValues.values ) {
				this.addField( i, initialValues.values[i], i == initialValues.default );
			}
		},
		
		/**
		 * Add a field
		 *
		 * @returns 	{void}
		 */
		addField: function ( id, value, isDefault ) {
			$(this.scope).find('[data-role=&quot;fieldsArea&quot;]').append( ips.templates.render( 'bitracker.submit.linkedScreenshot', {
				'name': $(this.scope).attr('data-name'),
				'id': id,
				'value': value,
				'extra': isDefault ? 'checked' : ''
			}) );
		},
		
		/**
		 * Remove a field
		 *
		 * @returns 	{void}
		 */
		removeField: function ( e ) {
			e.preventDefault();
			$(e.currentTarget).closest('li').remove();
		},
		
		/**
		 * Respond to add button
		 *
		 * @returns 	{void}
		 */
		addFieldButton: function () {
			this.addField( 'linked_' + new Date().getTime(), '', false );
		}
	});
}(jQuery, _));]]></file>
</javascript>
